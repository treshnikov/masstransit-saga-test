2022-08-05 16:45:05.178 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-05 16:45:05.258 +04:00 [DBG] Hosting starting
2022-08-05 16:45:05.402 +04:00 [DBG] Starting bus instances: IBus
2022-08-05 16:45:05.409 +04:00 [DBG] Starting bus: "rabbitmq://localhost:0/"
2022-08-05 16:45:05.436 +04:00 [DBG] Connect: rabbitmq@localhost:5672/
2022-08-05 16:45:05.549 +04:00 [DBG] Unable to locate an appropriate development https certificate.
2022-08-05 16:45:05.554 +04:00 [DBG] Stopping bus instances: IBus
2022-08-05 16:45:05.559 +04:00 [WRN] Failed to stop bus: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybk6rpbdp8pan1dn?temporary=true" (Not Started)
2022-08-05 16:45:05.587 +04:00 [WRN] Connection Failed: "rabbitmq://localhost:0/"
RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable
 ---> RabbitMQ.Client.Exceptions.AuthenticationFailureException: ACCESS_REFUSED - Login was refused using authentication mechanism PLAIN. For details see the broker logfile.
   at RabbitMQ.Client.Framing.Impl.Connection.StartAndTune()
   at RabbitMQ.Client.Framing.Impl.Connection.Open(Boolean insist)
   at RabbitMQ.Client.Framing.Impl.Connection..ctor(IConnectionFactory factory, Boolean insist, IFrameHandler frameHandler, String clientProvidedName)
   at RabbitMQ.Client.Framing.Impl.ProtocolBase.CreateConnection(IConnectionFactory factory, Boolean insist, IFrameHandler frameHandler, String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IList`1 hostnames, String clientProvidedName)
   at MassTransit.RabbitMqTransport.Integration.ConnectionContextFactory.CreateConnection(ISupervisor supervisor)
2022-08-05 16:45:05.623 +04:00 [DBG] Bus start faulted, stopping host
MassTransit.RabbitMqTransport.RabbitMqConnectionException: Broker unreachable: rabbitmq@localhost:5672/
 ---> RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable
 ---> RabbitMQ.Client.Exceptions.AuthenticationFailureException: ACCESS_REFUSED - Login was refused using authentication mechanism PLAIN. For details see the broker logfile.
   at RabbitMQ.Client.Framing.Impl.Connection.StartAndTune()
   at RabbitMQ.Client.Framing.Impl.Connection.Open(Boolean insist)
   at RabbitMQ.Client.Framing.Impl.Connection..ctor(IConnectionFactory factory, Boolean insist, IFrameHandler frameHandler, String clientProvidedName)
   at RabbitMQ.Client.Framing.Impl.ProtocolBase.CreateConnection(IConnectionFactory factory, Boolean insist, IFrameHandler frameHandler, String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IList`1 hostnames, String clientProvidedName)
   at MassTransit.RabbitMqTransport.Integration.ConnectionContextFactory.CreateConnection(ISupervisor supervisor)
   --- End of inner exception stack trace ---
   at MassTransit.RabbitMqTransport.Integration.ConnectionContextFactory.CreateConnection(ISupervisor supervisor)
   at GreenPipes.Internals.Extensions.TaskExtensions.<>c__DisplayClass5_0`1.<<OrCanceled>g__WaitAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at MassTransit.RabbitMqTransport.Integration.ConnectionContextFactory.CreateSharedConnection(Task`1 context, CancellationToken cancellationToken)
   at GreenPipes.Agents.PipeContextSupervisor`1.GreenPipes.IPipeContextSource<TContext>.Send(IPipe`1 pipe, CancellationToken cancellationToken)
   at GreenPipes.Agents.PipeContextSupervisor`1.GreenPipes.IPipeContextSource<TContext>.Send(IPipe`1 pipe, CancellationToken cancellationToken)
   at GreenPipes.Agents.PipeContextSupervisor`1.GreenPipes.IPipeContextSource<TContext>.Send(IPipe`1 pipe, CancellationToken cancellationToken)
   at MassTransit.Internals.Extensions.SupervisorExtensions.<>c__DisplayClass0_0`2.<<CreateAgent>g__HandleSupervisorTask|0>d.MoveNext()
--- End of stack trace from previous location ---
   at GreenPipes.Internals.Extensions.TaskExtensions.<>c__DisplayClass5_0`1.<<OrCanceled>g__WaitAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at MassTransit.RabbitMqTransport.Integration.ModelContextFactory.CreateSharedModel(Task`1 context, CancellationToken cancellationToken)
   at GreenPipes.Agents.PipeContextSupervisor`1.GreenPipes.IPipeContextSource<TContext>.Send(IPipe`1 pipe, CancellationToken cancellationToken)
   at GreenPipes.Agents.PipeContextSupervisor`1.GreenPipes.IPipeContextSource<TContext>.Send(IPipe`1 pipe, CancellationToken cancellationToken)
   at GreenPipes.Agents.PipeContextSupervisor`1.GreenPipes.IPipeContextSource<TContext>.Send(IPipe`1 pipe, CancellationToken cancellationToken)
   at MassTransit.Transports.TransportStartExtensions.OnTransportStartup[T](ReceiveEndpointContext context, ISupervisor`1 supervisor, CancellationToken cancellationToken)
   at MassTransit.Transports.ReceiveTransport`1.ReceiveTransportAgent.RunTransport()
   at MassTransit.Transports.StartHostHandle.EndpointsReady(Task`1[] endpoints)
   at MassTransit.Transports.StartHostHandle.ReadyOrNot(Task`1[] endpoints, Task`1[] riders)
   at MassTransit.MassTransitBus.Handle.ReadyOrNot(Task`1 ready)
   at GreenPipes.Internals.Extensions.TaskExtensions.<>c__DisplayClass5_0`1.<<OrCanceled>g__WaitAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at MassTransit.MassTransitBus.StartAsync(CancellationToken cancellationToken)
2022-08-05 16:45:05.626 +04:00 [DBG] Endpoint Faulted: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybk6rpbdp8pan1dn?temporary=true"
2022-08-05 16:45:05.652 +04:00 [DBG] Stopping bus: "rabbitmq://localhost:0/"
2022-08-05 16:45:05.660 +04:00 [DBG] Endpoint Stopping: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybk6rpbdp8pan1dn?temporary=true"
2022-08-05 16:45:05.664 +04:00 [DBG] Stopping receive transport: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybk6rpbdp8pan1dn?temporary=true"
2022-08-05 16:45:05.682 +04:00 [INF] Bus stopped: "rabbitmq://localhost:0/"
2022-08-05 21:37:45.944 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-05 21:37:46.108 +04:00 [DBG] Hosting starting
2022-08-05 21:37:46.445 +04:00 [DBG] Starting bus instances: IBus
2022-08-05 21:37:46.456 +04:00 [DBG] Starting bus: "rabbitmq://localhost:0/"
2022-08-05 21:37:46.565 +04:00 [DBG] Connect: rabbitmq@localhost:5672/
2022-08-05 21:37:46.618 +04:00 [INF] Now listening on: http://localhost:5063
2022-08-05 21:37:46.622 +04:00 [DBG] Loaded hosting startup assembly ApiGateway
2022-08-05 21:37:46.623 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-05 21:37:46.625 +04:00 [INF] Hosting environment: Development
2022-08-05 21:37:46.627 +04:00 [INF] Content root path: D:\github\microservices-archetecture\MicroservicesWithSagas\ApiGateway\
2022-08-05 21:37:46.629 +04:00 [DBG] Hosting started
2022-08-05 21:37:46.691 +04:00 [DBG] Connected: rabbitmq@localhost:5672/ (address: amqp://localhost:5672, local: 63157)
2022-08-05 21:37:46.748 +04:00 [INF] Bus started: "rabbitmq://localhost:0/"
2022-08-05 21:37:46.748 +04:00 [DBG] Endpoint Ready: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybmbd5bdp8qnjirf?temporary=true"
2022-08-05 21:38:45.511 +04:00 [DBG] Connection id "0HMJN15CD9IB7" accepted.
2022-08-05 21:38:45.514 +04:00 [DBG] Connection id "0HMJN15CD9IB7" started.
2022-08-05 21:38:45.545 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/ - -
2022-08-05 21:38:45.551 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-05 21:38:45.563 +04:00 [DBG] No candidates found for the request path '/'
2022-08-05 21:38:45.565 +04:00 [DBG] Request did not match any endpoints
2022-08-05 21:38:45.592 +04:00 [DBG] The request path  does not match the path filter
2022-08-05 21:38:45.595 +04:00 [WRN] Failed to determine the https port for redirect.
2022-08-05 21:38:45.617 +04:00 [DBG] Connection id "0HMJN15CD9IB7" completed keep alive response.
2022-08-05 21:38:45.621 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/ - - - 404 0 - 76.6704ms
2022-08-05 21:38:45.920 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/favicon.ico - -
2022-08-05 21:38:45.923 +04:00 [DBG] No candidates found for the request path '/favicon.ico'
2022-08-05 21:38:45.925 +04:00 [DBG] Request did not match any endpoints
2022-08-05 21:38:45.925 +04:00 [DBG] The request path  does not match the path filter
2022-08-05 21:38:45.927 +04:00 [DBG] Connection id "0HMJN15CD9IB7" completed keep alive response.
2022-08-05 21:38:45.928 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/favicon.ico - - - 404 0 - 7.4093ms
2022-08-05 21:38:53.816 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger - -
2022-08-05 21:38:53.817 +04:00 [DBG] No candidates found for the request path '/swagger'
2022-08-05 21:38:53.818 +04:00 [DBG] Request did not match any endpoints
2022-08-05 21:38:53.820 +04:00 [DBG] Connection id "0HMJN15CD9IB7" completed keep alive response.
2022-08-05 21:38:53.821 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger - - - 301 0 - 4.9639ms
2022-08-05 21:38:53.828 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger/index.html - -
2022-08-05 21:38:53.829 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2022-08-05 21:38:53.830 +04:00 [DBG] Request did not match any endpoints
2022-08-05 21:38:53.863 +04:00 [DBG] Connection id "0HMJN15CD9IB7" completed keep alive response.
2022-08-05 21:38:53.865 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger/index.html - - - 200 - text/html;charset=utf-8 36.7851ms
2022-08-05 21:38:53.912 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger/swagger-ui.css - -
2022-08-05 21:38:53.913 +04:00 [DBG] Connection id "0HMJN15CD9IB8" accepted.
2022-08-05 21:38:53.914 +04:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2022-08-05 21:38:53.914 +04:00 [DBG] Connection id "0HMJN15CD9IB8" started.
2022-08-05 21:38:53.914 +04:00 [DBG] Connection id "0HMJN15CD9IB9" accepted.
2022-08-05 21:38:53.915 +04:00 [DBG] Request did not match any endpoints
2022-08-05 21:38:53.916 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger/swagger-ui-bundle.js - -
2022-08-05 21:38:53.916 +04:00 [DBG] Connection id "0HMJN15CD9IB9" started.
2022-08-05 21:38:53.918 +04:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2022-08-05 21:38:53.919 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger/swagger-ui-standalone-preset.js - -
2022-08-05 21:38:53.920 +04:00 [DBG] Request did not match any endpoints
2022-08-05 21:38:53.920 +04:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2022-08-05 21:38:53.922 +04:00 [DBG] Request did not match any endpoints
2022-08-05 21:38:53.930 +04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-05 21:38:53.930 +04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-08-05 21:38:53.930 +04:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-08-05 21:38:53.933 +04:00 [DBG] Connection id "0HMJN15CD9IB7" completed keep alive response.
2022-08-05 21:38:53.933 +04:00 [DBG] Connection id "0HMJN15CD9IB9" completed keep alive response.
2022-08-05 21:38:53.934 +04:00 [DBG] Connection id "0HMJN15CD9IB8" completed keep alive response.
2022-08-05 21:38:53.935 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger/swagger-ui.css - - - 200 143632 text/css 23.2566ms
2022-08-05 21:38:53.936 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger/swagger-ui-standalone-preset.js - - - 200 337162 application/javascript 17.5835ms
2022-08-05 21:38:53.937 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 21.3843ms
2022-08-05 21:38:54.080 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger/favicon-32x32.png - -
2022-08-05 21:38:54.082 +04:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2022-08-05 21:38:54.083 +04:00 [DBG] Request did not match any endpoints
2022-08-05 21:38:54.084 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-08-05 21:38:54.085 +04:00 [DBG] Connection id "0HMJN15CD9IB8" completed keep alive response.
2022-08-05 21:38:54.087 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger/favicon-32x32.png - - - 200 628 image/png 6.3759ms
2022-08-05 21:38:54.117 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger/v1/swagger.json - -
2022-08-05 21:38:54.119 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-08-05 21:38:54.120 +04:00 [DBG] Request did not match any endpoints
2022-08-05 21:38:54.171 +04:00 [DBG] Connection id "0HMJN15CD9IB8" completed keep alive response.
2022-08-05 21:38:54.173 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 56.2212ms
2022-08-05 21:39:10.578 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5063/api/v1/items/buy application/json 86
2022-08-05 21:39:10.584 +04:00 [DBG] 1 candidate(s) found for the request path '/api/v1/items/buy'
2022-08-05 21:39:10.589 +04:00 [DBG] Endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)' with route pattern 'api/v1/items/buy' is valid for the request path '/api/v1/items/buy'
2022-08-05 21:39:10.590 +04:00 [DBG] Request matched endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 21:39:10.591 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-08-05 21:39:10.592 +04:00 [INF] Executing endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 21:39:10.615 +04:00 [INF] Route matched with {action = "Buy", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Contracts.BuyItemsResponse] BuyAsync(ApiGateway.Controllers.BuyItemsRequstModel) on controller ApiGateway.Controllers.ItemsController (ApiGateway).
2022-08-05 21:39:10.618 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-05 21:39:10.620 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-05 21:39:10.622 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-05 21:39:10.623 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-05 21:39:10.625 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-05 21:39:10.628 +04:00 [DBG] Executing controller factory for controller ApiGateway.Controllers.ItemsController (ApiGateway)
2022-08-05 21:39:10.630 +04:00 [DBG] Executed controller factory for controller ApiGateway.Controllers.ItemsController (ApiGateway)
2022-08-05 21:39:10.635 +04:00 [DBG] Attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' ...
2022-08-05 21:39:10.640 +04:00 [DBG] Attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' using the name '' in request data ...
2022-08-05 21:39:10.642 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-05 21:39:10.647 +04:00 [DBG] Connection id "0HMJN15CD9IB8", Request id "0HMJN15CD9IB8:00000005": started reading request body.
2022-08-05 21:39:10.651 +04:00 [DBG] Connection id "0HMJN15CD9IB8", Request id "0HMJN15CD9IB8:00000005": done reading request body.
2022-08-05 21:39:10.657 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApiGateway.Controllers.BuyItemsRequstModel'
2022-08-05 21:39:10.660 +04:00 [DBG] Done attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 21:39:10.661 +04:00 [DBG] Done attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 21:39:10.662 +04:00 [DBG] Attempting to validate the bound parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' ...
2022-08-05 21:39:10.670 +04:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 21:39:10.673 +04:00 [WRN] HTTTTTT!!!
2022-08-05 21:39:10.730 +04:00 [DBG] Declare exchange: name: Contracts:BuyItemsRequest, type: fanout, durable
2022-08-05 21:39:10.767 +04:00 [DBG] Declare queue: name: SMS2104090_ApiGateway_bus_5eooyyn76cybmbd5bdp8qnjirf, x-expires: 60000, consumer-count: 0 message-count: 0
2022-08-05 21:39:10.786 +04:00 [DBG] Declare exchange: name: SMS2104090_ApiGateway_bus_5eooyyn76cybmbd5bdp8qnjirf, type: fanout, auto-delete
2022-08-05 21:39:10.792 +04:00 [DBG] Bind queue: source: SMS2104090_ApiGateway_bus_5eooyyn76cybmbd5bdp8qnjirf, destination: SMS2104090_ApiGateway_bus_5eooyyn76cybmbd5bdp8qnjirf
2022-08-05 21:39:10.847 +04:00 [DBG] Consumer Ok: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybmbd5bdp8qnjirf?temporary=true" - amq.ctag-QzajfcuZltnlpxLHFDAbHA
2022-08-05 21:39:10.997 +04:00 [DBG] SEND "rabbitmq://localhost:0/Contracts:BuyItemsRequest" "da210000-5df3-0015-76da-08da770967de" Contracts.BuyItemsRequest
2022-08-05 21:39:12.787 +04:00 [DBG] RECEIVE "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybmbd5bdp8qnjirf?temporary=true" "14400000-5df3-0015-091d-08da7709690d" Contracts.BuyItemsResponse MassTransit.MessageHandler<Contracts.BuyItemsResponse>("00:00:00.0009622")
2022-08-05 21:39:12.787 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-05 21:39:12.795 +04:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-08-05 21:39:12.796 +04:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-08-05 21:39:12.797 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-05 21:39:12.798 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-05 21:39:12.799 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-05 21:39:12.801 +04:00 [INF] Executing ObjectResult, writing value of type 'Contracts.BuyItemsResponse'.
2022-08-05 21:39:12.806 +04:00 [INF] Executed action ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway) in 2177.0685ms
2022-08-05 21:39:12.808 +04:00 [INF] Executed endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 21:39:12.809 +04:00 [DBG] Connection id "0HMJN15CD9IB8" completed keep alive response.
2022-08-05 21:39:12.809 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5063/api/v1/items/buy application/json 86 - 200 - application/json;+charset=utf-8 2231.2298ms
2022-08-05 21:40:26.011 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5063/api/v1/items/buy application/json 86
2022-08-05 21:40:26.012 +04:00 [DBG] 1 candidate(s) found for the request path '/api/v1/items/buy'
2022-08-05 21:40:26.013 +04:00 [DBG] Endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)' with route pattern 'api/v1/items/buy' is valid for the request path '/api/v1/items/buy'
2022-08-05 21:40:26.014 +04:00 [DBG] Request matched endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 21:40:26.015 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-08-05 21:40:26.016 +04:00 [INF] Executing endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 21:40:26.017 +04:00 [INF] Route matched with {action = "Buy", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Contracts.BuyItemsResponse] BuyAsync(ApiGateway.Controllers.BuyItemsRequstModel) on controller ApiGateway.Controllers.ItemsController (ApiGateway).
2022-08-05 21:40:26.019 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-05 21:40:26.020 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-05 21:40:26.021 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-05 21:40:26.023 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-05 21:40:26.024 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-05 21:40:26.025 +04:00 [DBG] Executing controller factory for controller ApiGateway.Controllers.ItemsController (ApiGateway)
2022-08-05 21:40:26.026 +04:00 [DBG] Executed controller factory for controller ApiGateway.Controllers.ItemsController (ApiGateway)
2022-08-05 21:40:26.027 +04:00 [DBG] Attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' ...
2022-08-05 21:40:26.028 +04:00 [DBG] Attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' using the name '' in request data ...
2022-08-05 21:40:26.030 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-05 21:40:26.031 +04:00 [DBG] Connection id "0HMJN15CD9IB8", Request id "0HMJN15CD9IB8:00000006": started reading request body.
2022-08-05 21:40:26.032 +04:00 [DBG] Connection id "0HMJN15CD9IB8", Request id "0HMJN15CD9IB8:00000006": done reading request body.
2022-08-05 21:40:26.034 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApiGateway.Controllers.BuyItemsRequstModel'
2022-08-05 21:40:26.035 +04:00 [DBG] Done attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 21:40:26.036 +04:00 [DBG] Done attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 21:40:26.037 +04:00 [DBG] Attempting to validate the bound parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' ...
2022-08-05 21:40:26.038 +04:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 21:40:26.039 +04:00 [WRN] HTTTTTT!!!
2022-08-05 21:40:26.069 +04:00 [DBG] SEND "rabbitmq://localhost:0/Contracts:BuyItemsRequest" "da210000-5df3-0015-897d-08da770994c0" Contracts.BuyItemsRequest
2022-08-05 21:40:32.248 +04:00 [DBG] RECEIVE "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybmbd5bdp8qnjirf?temporary=true" "14400000-5df3-0015-4e28-08da7709986f" MassTransit.Fault<Contracts.BuyItemsRequest> MassTransit.MessageHandler<Fault<Contracts.BuyItemsRequest>>("00:00:00.0010104")
2022-08-05 21:40:32.249 +04:00 [INF] Executed action ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway) in 6224.172ms
2022-08-05 21:40:32.253 +04:00 [INF] Executed endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 21:40:32.258 +04:00 [ERR] An unhandled exception has occurred while executing the request.
MassTransit.RequestFaultException: The Contracts.BuyItemsRequest request faulted: BuyItemsSagaState(3fa85f64-5717-4562-b3fc-2c963f66afa6) Saga exception on receipt of Contracts.BuyItemsRequest: Not accepted in state Final
   at MassTransit.Clients.ResponseHandlerConnectHandle`1.GetTask()
   at MassTransit.RequestExtensions.Request[TRequest,TResponse](IBus bus, TRequest message, CancellationToken cancellationToken, RequestTimeout timeout, Action`1 callback)
   at ApiGateway.Controllers.ItemsController.BuyAsync(BuyItemsRequstModel model) in D:\github\microservices-archetecture\MicroservicesWithSagas\ApiGateway\Controllers\ItemsController.cs:line 24
   at lambda_method7(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-08-05 21:40:32.304 +04:00 [DBG] Connection id "0HMJN15CD9IB8" completed keep alive response.
2022-08-05 21:40:32.305 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5063/api/v1/items/buy application/json 86 - 500 - text/plain;+charset=utf-8 6294.1414ms
2022-08-05 21:40:48.999 +04:00 [DBG] Connection id "0HMJN15CD9IB7" received FIN.
2022-08-05 21:40:49.001 +04:00 [DBG] Connection id "0HMJN15CD9IB7" sending FIN because: "The client closed the connection."
2022-08-05 21:40:49.003 +04:00 [DBG] Connection id "0HMJN15CD9IB7" disconnecting.
2022-08-05 21:40:49.005 +04:00 [DBG] Connection id "0HMJN15CD9IB7" stopped.
2022-08-05 21:40:50.007 +04:00 [DBG] Connection id "0HMJN15CD9IB9" received FIN.
2022-08-05 21:40:50.010 +04:00 [DBG] Connection id "0HMJN15CD9IB9" sending FIN because: "The client closed the connection."
2022-08-05 21:40:50.012 +04:00 [DBG] Connection id "0HMJN15CD9IB9" disconnecting.
2022-08-05 21:40:50.013 +04:00 [DBG] Connection id "0HMJN15CD9IB9" stopped.
2022-08-05 21:41:26.438 +04:00 [INF] Application is shutting down...
2022-08-05 21:41:26.438 +04:00 [DBG] Hosting stopping
2022-08-05 21:41:26.443 +04:00 [DBG] Connection id "0HMJN15CD9IB8" disconnecting.
2022-08-05 21:41:26.444 +04:00 [DBG] Connection id "0HMJN15CD9IB8" stopped.
2022-08-05 21:41:26.445 +04:00 [DBG] Connection id "0HMJN15CD9IB8" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-05 21:41:26.449 +04:00 [DBG] Stopping bus instances: IBus
2022-08-05 21:41:26.453 +04:00 [DBG] Stopping bus: "rabbitmq://localhost:0/"
2022-08-05 21:41:26.459 +04:00 [DBG] Endpoint Stopping: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybmbd5bdp8qnjirf?temporary=true"
2022-08-05 21:41:26.461 +04:00 [DBG] Stopping receive transport: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybmbd5bdp8qnjirf?temporary=true"
2022-08-05 21:41:26.467 +04:00 [DBG] Stopping Consumer: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybmbd5bdp8qnjirf?temporary=true" - amq.ctag-QzajfcuZltnlpxLHFDAbHA
2022-08-05 21:41:26.472 +04:00 [DBG] Consumer Cancel Ok: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybmbd5bdp8qnjirf?temporary=true" - amq.ctag-QzajfcuZltnlpxLHFDAbHA
2022-08-05 21:41:26.477 +04:00 [DBG] Endpoint Completed: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybmbd5bdp8qnjirf?temporary=true"
2022-08-05 21:41:26.477 +04:00 [DBG] Stopping send transport: Contracts:BuyItemsRequest
2022-08-05 21:41:26.478 +04:00 [DBG] Consumer completed amq.ctag-QzajfcuZltnlpxLHFDAbHA: 2 received, 1 concurrent
2022-08-05 21:41:26.499 +04:00 [DBG] Disconnect: rabbitmq@localhost:5672/
2022-08-05 21:41:26.506 +04:00 [DBG] Disconnected: rabbitmq@localhost:5672/
2022-08-05 21:41:26.508 +04:00 [INF] Bus stopped: "rabbitmq://localhost:0/"
2022-08-05 21:41:26.509 +04:00 [DBG] Hosting stopped
2022-08-05 21:55:34.710 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-05 21:55:34.881 +04:00 [DBG] Hosting starting
2022-08-05 21:55:35.469 +04:00 [DBG] Starting bus instances: IBus
2022-08-05 21:55:35.484 +04:00 [DBG] Starting bus: "rabbitmq://localhost:0/"
2022-08-05 21:55:35.583 +04:00 [DBG] Connect: rabbitmq@localhost:5672/
2022-08-05 21:55:36.329 +04:00 [DBG] Connected: rabbitmq@localhost:5672/ (address: amqp://localhost:5672, local: 55337)
2022-08-05 21:55:36.337 +04:00 [INF] Now listening on: http://localhost:5063
2022-08-05 21:55:36.431 +04:00 [DBG] Loaded hosting startup assembly ApiGateway
2022-08-05 21:55:36.449 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-05 21:55:36.614 +04:00 [DBG] Connection id "0HMJN1EPNU513" received FIN.
2022-08-05 21:55:36.646 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-05 21:55:36.659 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-05 21:55:36.661 +04:00 [INF] Hosting environment: Development
2022-08-05 21:55:36.664 +04:00 [INF] Content root path: D:\github\microservices-archetecture\src\ApiGateway\
2022-08-05 21:55:36.667 +04:00 [DBG] Hosting started
2022-08-05 21:55:36.674 +04:00 [DBG] Connection id "0HMJN1EPNU513" accepted.
2022-08-05 21:55:36.692 +04:00 [DBG] Connection id "0HMJN1EPNU513" started.
2022-08-05 21:55:36.711 +04:00 [DBG] Endpoint Ready: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybk44kbdp8qn71rz?temporary=true"
2022-08-05 21:55:36.715 +04:00 [INF] Bus started: "rabbitmq://localhost:0/"
2022-08-05 21:55:36.928 +04:00 [DBG] Connection id "0HMJN1EPNU513" sending FIN because: "The client closed the connection."
2022-08-05 21:55:36.971 +04:00 [DBG] Connection id "0HMJN1EPNU513" disconnecting.
2022-08-05 21:55:37.000 +04:00 [DBG] Connection id "0HMJN1EPNU513" stopped.
2022-08-05 21:55:39.138 +04:00 [DBG] Connection id "0HMJN1EPNU514" accepted.
2022-08-05 21:55:39.295 +04:00 [DBG] Connection id "0HMJN1EPNU514" received FIN.
2022-08-05 21:55:39.318 +04:00 [DBG] Connection id "0HMJN1EPNU514" started.
2022-08-05 21:55:39.411 +04:00 [DBG] Connection id "0HMJN1EPNU515" accepted.
2022-08-05 21:55:39.448 +04:00 [DBG] Connection id "0HMJN1EPNU514" sending FIN because: "The client closed the connection."
2022-08-05 21:55:39.456 +04:00 [DBG] Connection id "0HMJN1EPNU516" accepted.
2022-08-05 21:55:39.466 +04:00 [DBG] Connection id "0HMJN1EPNU516" started.
2022-08-05 21:55:39.466 +04:00 [DBG] Connection id "0HMJN1EPNU515" started.
2022-08-05 21:55:39.463 +04:00 [DBG] Connection id "0HMJN1EPNU514" disconnecting.
2022-08-05 21:55:39.593 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger/index.html - -
2022-08-05 21:55:39.594 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger - -
2022-08-05 21:55:39.726 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-05 21:55:39.725 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-05 21:55:39.784 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2022-08-05 21:55:39.784 +04:00 [DBG] No candidates found for the request path '/swagger'
2022-08-05 21:55:39.884 +04:00 [DBG] Request did not match any endpoints
2022-08-05 21:55:39.887 +04:00 [DBG] Request did not match any endpoints
2022-08-05 21:55:40.018 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger - - - 0 - - 438.4665ms
2022-08-05 21:55:40.100 +04:00 [DBG] Connection id "0HMJN1EPNU514" stopped.
2022-08-05 21:55:40.149 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-05 21:55:40.583 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-05 21:55:40.597 +04:00 [DBG] Connection id "0HMJN1EPNU515" completed keep alive response.
2022-08-05 21:55:40.617 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger/index.html - - - 200 - text/html;charset=utf-8 1038.2312ms
2022-08-05 21:55:40.929 +04:00 [DBG] Connection id "0HMJN1EPNU516" received FIN.
2022-08-05 21:55:40.930 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger/swagger-ui.css - -
2022-08-05 21:55:40.937 +04:00 [DBG] Connection id "0HMJN1EPNU516" sending FIN because: "The client closed the connection."
2022-08-05 21:55:40.939 +04:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2022-08-05 21:55:40.942 +04:00 [DBG] Connection id "0HMJN1EPNU516" disconnecting.
2022-08-05 21:55:40.944 +04:00 [DBG] Request did not match any endpoints
2022-08-05 21:55:40.961 +04:00 [DBG] The file transmission was cancelled
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.StaticFiles.StaticFileContext.SendAsync()
2022-08-05 21:55:41.216 +04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-08-05 21:55:41.260 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/_framework/aspnetcore-browser-refresh.js - -
2022-08-05 21:55:41.388 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger/swagger-ui.css - - - 0 143632 text/css 457.4395ms
2022-08-05 21:55:41.399 +04:00 [DBG] Connection id "0HMJN1EPNU516" stopped.
2022-08-05 21:55:41.402 +04:00 [DBG] Connection id "0HMJN1EPNU515" completed keep alive response.
2022-08-05 21:55:41.409 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/_framework/aspnetcore-browser-refresh.js - - - 200 11944 application/javascript;+charset=utf-8 149.1797ms
2022-08-05 21:55:42.514 +04:00 [DBG] Connection id "0HMJN1EPNU515" received FIN.
2022-08-05 21:55:42.515 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger/favicon-32x32.png - -
2022-08-05 21:55:42.519 +04:00 [DBG] Connection id "0HMJN1EPNU515" sending FIN because: "The client closed the connection."
2022-08-05 21:55:42.520 +04:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2022-08-05 21:55:42.526 +04:00 [DBG] Connection id "0HMJN1EPNU515" disconnecting.
2022-08-05 21:55:42.527 +04:00 [DBG] Request did not match any endpoints
2022-08-05 21:55:42.533 +04:00 [DBG] The file transmission was cancelled
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.StaticFiles.StaticFileContext.SendAsync()
2022-08-05 21:55:42.542 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-08-05 21:55:42.545 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger/favicon-32x32.png - - - 0 628 image/png 30.5388ms
2022-08-05 21:55:42.548 +04:00 [DBG] Connection id "0HMJN1EPNU515" stopped.
2022-08-05 21:55:43.230 +04:00 [DBG] Connection id "0HMJN1EPNU517" accepted.
2022-08-05 21:55:43.232 +04:00 [DBG] Connection id "0HMJN1EPNU517" started.
2022-08-05 21:55:43.234 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger/v1/swagger.json - -
2022-08-05 21:55:43.236 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-08-05 21:55:43.238 +04:00 [DBG] Request did not match any endpoints
2022-08-05 21:55:43.450 +04:00 [DBG] Connection id "0HMJN1EPNU517" completed keep alive response.
2022-08-05 21:55:43.453 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 218.5551ms
2022-08-05 21:56:19.039 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5063/api/v1/items/buy application/json 86
2022-08-05 21:56:19.044 +04:00 [DBG] 1 candidate(s) found for the request path '/api/v1/items/buy'
2022-08-05 21:56:19.049 +04:00 [DBG] Endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)' with route pattern 'api/v1/items/buy' is valid for the request path '/api/v1/items/buy'
2022-08-05 21:56:19.050 +04:00 [DBG] Request matched endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 21:56:19.051 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-08-05 21:56:19.053 +04:00 [WRN] Failed to determine the https port for redirect.
2022-08-05 21:56:19.055 +04:00 [INF] Executing endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 21:56:19.079 +04:00 [INF] Route matched with {action = "Buy", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Contracts.BuyItemsResponse] BuyAsync(ApiGateway.Controllers.BuyItemsRequstModel) on controller ApiGateway.Controllers.ItemsController (ApiGateway).
2022-08-05 21:56:19.083 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-05 21:56:19.084 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-05 21:56:19.085 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-05 21:56:19.089 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-05 21:56:19.090 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-05 21:56:19.093 +04:00 [DBG] Executing controller factory for controller ApiGateway.Controllers.ItemsController (ApiGateway)
2022-08-05 21:56:19.094 +04:00 [DBG] Executed controller factory for controller ApiGateway.Controllers.ItemsController (ApiGateway)
2022-08-05 21:56:19.098 +04:00 [DBG] Attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' ...
2022-08-05 21:56:19.100 +04:00 [DBG] Attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' using the name '' in request data ...
2022-08-05 21:56:19.102 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-05 21:56:19.107 +04:00 [DBG] Connection id "0HMJN1EPNU517", Request id "0HMJN1EPNU517:00000003": started reading request body.
2022-08-05 21:56:19.109 +04:00 [DBG] Connection id "0HMJN1EPNU517", Request id "0HMJN1EPNU517:00000003": done reading request body.
2022-08-05 21:56:19.115 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApiGateway.Controllers.BuyItemsRequstModel'
2022-08-05 21:56:19.116 +04:00 [DBG] Done attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 21:56:19.117 +04:00 [DBG] Done attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 21:56:19.119 +04:00 [DBG] Attempting to validate the bound parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' ...
2022-08-05 21:56:19.131 +04:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 21:56:19.229 +04:00 [DBG] Declare exchange: name: Contracts:BuyItemsRequest, type: fanout, durable
2022-08-05 21:56:19.286 +04:00 [DBG] Declare queue: name: SMS2104090_ApiGateway_bus_5eooyyn76cybk44kbdp8qn71rz, x-expires: 60000, consumer-count: 0 message-count: 0
2022-08-05 21:56:19.308 +04:00 [DBG] Declare exchange: name: SMS2104090_ApiGateway_bus_5eooyyn76cybk44kbdp8qn71rz, type: fanout, auto-delete
2022-08-05 21:56:19.312 +04:00 [DBG] Bind queue: source: SMS2104090_ApiGateway_bus_5eooyyn76cybk44kbdp8qn71rz, destination: SMS2104090_ApiGateway_bus_5eooyyn76cybk44kbdp8qn71rz
2022-08-05 21:56:19.375 +04:00 [DBG] Consumer Ok: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybk44kbdp8qn71rz?temporary=true" - amq.ctag-b1d1M1allgGWuIpZP9hELg
2022-08-05 21:56:19.605 +04:00 [DBG] SEND "rabbitmq://localhost:0/Contracts:BuyItemsRequest" "da210000-5df3-0015-24e4-08da770bcce7" Contracts.BuyItemsRequest
2022-08-05 21:56:23.085 +04:00 [DBG] RECEIVE "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybk44kbdp8qn71rz?temporary=true" "e0330000-5df3-0015-4171-08da770bcf19" Contracts.BuyItemsResponse MassTransit.MessageHandler<Contracts.BuyItemsResponse>("00:00:00.0051304")
2022-08-05 21:56:23.087 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-05 21:56:23.098 +04:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-08-05 21:56:23.101 +04:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-08-05 21:56:23.103 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-05 21:56:23.105 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-05 21:56:23.108 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-05 21:56:23.110 +04:00 [INF] Executing ObjectResult, writing value of type 'Contracts.BuyItemsResponse'.
2022-08-05 21:56:23.128 +04:00 [INF] Executed action ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway) in 4026.5717ms
2022-08-05 21:56:23.130 +04:00 [INF] Executed endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 21:56:23.133 +04:00 [DBG] Connection id "0HMJN1EPNU517" completed keep alive response.
2022-08-05 21:56:23.134 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5063/api/v1/items/buy application/json 86 - 200 - application/json;+charset=utf-8 4095.1442ms
2022-08-05 22:06:17.823 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-05 22:06:18.142 +04:00 [DBG] Hosting starting
2022-08-05 22:06:18.996 +04:00 [DBG] Starting bus instances: IBus
2022-08-05 22:06:19.009 +04:00 [DBG] Starting bus: "rabbitmq://localhost:0/"
2022-08-05 22:06:19.135 +04:00 [DBG] Connect: rabbitmq@localhost:5672/
2022-08-05 22:06:19.653 +04:00 [DBG] Connected: rabbitmq@localhost:5672/ (address: amqp://localhost:5672, local: 53062)
2022-08-05 22:06:19.657 +04:00 [INF] Now listening on: http://localhost:5063
2022-08-05 22:06:19.769 +04:00 [DBG] Loaded hosting startup assembly ApiGateway
2022-08-05 22:06:19.771 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-05 22:06:19.773 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-05 22:06:19.776 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-05 22:06:19.784 +04:00 [INF] Hosting environment: Development
2022-08-05 22:06:19.793 +04:00 [INF] Content root path: D:\github\microservices-archetecture\src\ApiGateway\
2022-08-05 22:06:19.797 +04:00 [DBG] Hosting started
2022-08-05 22:06:19.863 +04:00 [INF] Bus started: "rabbitmq://localhost:0/"
2022-08-05 22:06:19.866 +04:00 [DBG] Endpoint Ready: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybkadnbdp8qdj1ys?temporary=true"
2022-08-05 22:06:19.912 +04:00 [DBG] Connection id "0HMJN1KPER9TC" accepted.
2022-08-05 22:06:19.928 +04:00 [DBG] Connection id "0HMJN1KPER9TC" started.
2022-08-05 22:06:20.125 +04:00 [DBG] Connection id "0HMJN1KPER9TC" received FIN.
2022-08-05 22:06:20.166 +04:00 [DBG] Connection id "0HMJN1KPER9TC" sending FIN because: "The client closed the connection."
2022-08-05 22:06:20.182 +04:00 [DBG] Connection id "0HMJN1KPER9TC" disconnecting.
2022-08-05 22:06:20.193 +04:00 [DBG] Connection id "0HMJN1KPER9TC" stopped.
2022-08-05 22:06:24.255 +04:00 [DBG] Connection id "0HMJN1KPER9TD" accepted.
2022-08-05 22:06:24.258 +04:00 [DBG] Connection id "0HMJN1KPER9TD" started.
2022-08-05 22:06:24.286 +04:00 [DBG] Connection id "0HMJN1KPER9TD" received FIN.
2022-08-05 22:06:24.291 +04:00 [DBG] Connection id "0HMJN1KPER9TE" accepted.
2022-08-05 22:06:24.291 +04:00 [DBG] Connection id "0HMJN1KPER9TD" sending FIN because: "The client closed the connection."
2022-08-05 22:06:24.293 +04:00 [DBG] Connection id "0HMJN1KPER9TE" started.
2022-08-05 22:06:24.297 +04:00 [DBG] Connection id "0HMJN1KPER9TD" disconnecting.
2022-08-05 22:06:24.333 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger/index.html - -
2022-08-05 22:06:24.333 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger - -
2022-08-05 22:06:24.371 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-05 22:06:24.371 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-05 22:06:24.398 +04:00 [DBG] No candidates found for the request path '/swagger'
2022-08-05 22:06:24.398 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2022-08-05 22:06:24.400 +04:00 [DBG] Request did not match any endpoints
2022-08-05 22:06:24.401 +04:00 [DBG] Request did not match any endpoints
2022-08-05 22:06:24.451 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger - - - 0 - - 121.5078ms
2022-08-05 22:06:24.463 +04:00 [DBG] Connection id "0HMJN1KPER9TD" stopped.
2022-08-05 22:06:24.522 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-05 22:06:24.621 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-05 22:06:24.623 +04:00 [DBG] Connection id "0HMJN1KPER9TE" completed keep alive response.
2022-08-05 22:06:24.625 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger/index.html - - - 200 - text/html;charset=utf-8 295.3807ms
2022-08-05 22:06:24.712 +04:00 [DBG] Connection id "0HMJN1KPER9TF" accepted.
2022-08-05 22:06:24.713 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/_framework/aspnetcore-browser-refresh.js - -
2022-08-05 22:06:24.714 +04:00 [DBG] Connection id "0HMJN1KPER9TF" received FIN.
2022-08-05 22:06:24.732 +04:00 [DBG] Connection id "0HMJN1KPER9TF" started.
2022-08-05 22:06:24.738 +04:00 [DBG] Connection id "0HMJN1KPER9TE" completed keep alive response.
2022-08-05 22:06:24.745 +04:00 [DBG] Connection id "0HMJN1KPER9TF" sending FIN because: "The client closed the connection."
2022-08-05 22:06:24.747 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/_framework/aspnetcore-browser-refresh.js - - - 200 11944 application/javascript;+charset=utf-8 34.2762ms
2022-08-05 22:06:24.752 +04:00 [DBG] Connection id "0HMJN1KPER9TF" disconnecting.
2022-08-05 22:06:24.759 +04:00 [DBG] Connection id "0HMJN1KPER9TF" stopped.
2022-08-05 22:06:24.984 +04:00 [DBG] Connection id "0HMJN1KPER9TE" received FIN.
2022-08-05 22:06:24.984 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger/favicon-32x32.png - -
2022-08-05 22:06:24.987 +04:00 [DBG] Connection id "0HMJN1KPER9TE" sending FIN because: "The client closed the connection."
2022-08-05 22:06:24.990 +04:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2022-08-05 22:06:24.992 +04:00 [DBG] Connection id "0HMJN1KPER9TE" disconnecting.
2022-08-05 22:06:24.994 +04:00 [DBG] Request did not match any endpoints
2022-08-05 22:06:25.008 +04:00 [DBG] The file transmission was cancelled
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.StaticFiles.StaticFileContext.SendAsync()
2022-08-05 22:06:25.076 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-08-05 22:06:25.078 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger/favicon-32x32.png - - - 0 628 image/png 93.4323ms
2022-08-05 22:06:25.079 +04:00 [DBG] Connection id "0HMJN1KPER9TE" stopped.
2022-08-05 22:06:25.145 +04:00 [DBG] Connection id "0HMJN1KPER9TG" accepted.
2022-08-05 22:06:25.147 +04:00 [DBG] Connection id "0HMJN1KPER9TG" started.
2022-08-05 22:06:25.150 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5063/swagger/v1/swagger.json - -
2022-08-05 22:06:25.152 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-08-05 22:06:25.156 +04:00 [DBG] Request did not match any endpoints
2022-08-05 22:06:25.314 +04:00 [DBG] Connection id "0HMJN1KPER9TG" completed keep alive response.
2022-08-05 22:06:25.317 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5063/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 167.0532ms
2022-08-05 22:07:12.697 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5063/api/v1/items/buy application/json 86
2022-08-05 22:07:12.701 +04:00 [DBG] 1 candidate(s) found for the request path '/api/v1/items/buy'
2022-08-05 22:07:12.704 +04:00 [DBG] Endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)' with route pattern 'api/v1/items/buy' is valid for the request path '/api/v1/items/buy'
2022-08-05 22:07:12.707 +04:00 [DBG] Request matched endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 22:07:12.708 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-08-05 22:07:12.709 +04:00 [WRN] Failed to determine the https port for redirect.
2022-08-05 22:07:12.713 +04:00 [INF] Executing endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 22:07:12.733 +04:00 [INF] Route matched with {action = "Buy", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Contracts.BuyItemsResponse] BuyAsync(ApiGateway.Controllers.BuyItemsRequstModel) on controller ApiGateway.Controllers.ItemsController (ApiGateway).
2022-08-05 22:07:12.736 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-05 22:07:12.738 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-05 22:07:12.739 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-05 22:07:12.741 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-05 22:07:12.742 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-05 22:07:12.744 +04:00 [DBG] Executing controller factory for controller ApiGateway.Controllers.ItemsController (ApiGateway)
2022-08-05 22:07:12.745 +04:00 [DBG] Executed controller factory for controller ApiGateway.Controllers.ItemsController (ApiGateway)
2022-08-05 22:07:12.748 +04:00 [DBG] Attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' ...
2022-08-05 22:07:12.750 +04:00 [DBG] Attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' using the name '' in request data ...
2022-08-05 22:07:12.752 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-05 22:07:12.757 +04:00 [DBG] Connection id "0HMJN1KPER9TG", Request id "0HMJN1KPER9TG:00000003": started reading request body.
2022-08-05 22:07:12.758 +04:00 [DBG] Connection id "0HMJN1KPER9TG", Request id "0HMJN1KPER9TG:00000003": done reading request body.
2022-08-05 22:07:12.763 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApiGateway.Controllers.BuyItemsRequstModel'
2022-08-05 22:07:12.764 +04:00 [DBG] Done attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 22:07:12.765 +04:00 [DBG] Done attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 22:07:12.766 +04:00 [DBG] Attempting to validate the bound parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' ...
2022-08-05 22:07:12.774 +04:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 22:07:12.861 +04:00 [DBG] Declare exchange: name: Contracts:BuyItemsRequest, type: fanout, durable
2022-08-05 22:07:12.905 +04:00 [DBG] Declare queue: name: SMS2104090_ApiGateway_bus_5eooyyn76cybkadnbdp8qdj1ys, x-expires: 60000, consumer-count: 0 message-count: 0
2022-08-05 22:07:12.931 +04:00 [DBG] Declare exchange: name: SMS2104090_ApiGateway_bus_5eooyyn76cybkadnbdp8qdj1ys, type: fanout, auto-delete
2022-08-05 22:07:12.935 +04:00 [DBG] Bind queue: source: SMS2104090_ApiGateway_bus_5eooyyn76cybkadnbdp8qdj1ys, destination: SMS2104090_ApiGateway_bus_5eooyyn76cybkadnbdp8qdj1ys
2022-08-05 22:07:12.995 +04:00 [DBG] Consumer Ok: "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybkadnbdp8qdj1ys?temporary=true" - amq.ctag-EFoJ10c320eqAgQT0jDegA
2022-08-05 22:07:13.177 +04:00 [DBG] SEND "rabbitmq://localhost:0/Contracts:BuyItemsRequest" "da210000-5df3-0015-0f44-08da770d527f" Contracts.BuyItemsRequest
2022-08-05 22:07:15.178 +04:00 [DBG] RECEIVE "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybkadnbdp8qdj1ys?temporary=true" "0c5b0000-5df3-0015-7114-08da770d53ca" Contracts.BuyItemsResponse MassTransit.MessageHandler<Contracts.BuyItemsResponse>("00:00:00.0030617")
2022-08-05 22:07:15.181 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-05 22:07:15.193 +04:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-08-05 22:07:15.196 +04:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-08-05 22:07:15.198 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-05 22:07:15.201 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-05 22:07:15.203 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-05 22:07:15.205 +04:00 [INF] Executing ObjectResult, writing value of type 'Contracts.BuyItemsResponse'.
2022-08-05 22:07:15.218 +04:00 [INF] Executed action ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway) in 2469.3406ms
2022-08-05 22:07:15.222 +04:00 [INF] Executed endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 22:07:15.225 +04:00 [DBG] Connection id "0HMJN1KPER9TG" completed keep alive response.
2022-08-05 22:07:15.227 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5063/api/v1/items/buy application/json 86 - 200 - application/json;+charset=utf-8 2530.0532ms
2022-08-05 22:09:10.424 +04:00 [DBG] Connection id "0HMJN1KPER9TG" received FIN.
2022-08-05 22:09:10.427 +04:00 [DBG] Connection id "0HMJN1KPER9TG" disconnecting.
2022-08-05 22:09:10.429 +04:00 [DBG] Connection id "0HMJN1KPER9TG" sending FIN because: "The client closed the connection."
2022-08-05 22:09:10.434 +04:00 [DBG] Connection id "0HMJN1KPER9TG" stopped.
2022-08-05 22:09:42.027 +04:00 [DBG] Connection id "0HMJN1KPER9TH" accepted.
2022-08-05 22:09:42.028 +04:00 [DBG] Connection id "0HMJN1KPER9TH" started.
2022-08-05 22:09:42.030 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5063/api/v1/items/buy application/json 86
2022-08-05 22:09:42.031 +04:00 [DBG] 1 candidate(s) found for the request path '/api/v1/items/buy'
2022-08-05 22:09:42.031 +04:00 [DBG] Endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)' with route pattern 'api/v1/items/buy' is valid for the request path '/api/v1/items/buy'
2022-08-05 22:09:42.033 +04:00 [DBG] Request matched endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 22:09:42.034 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-08-05 22:09:42.035 +04:00 [INF] Executing endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 22:09:42.036 +04:00 [INF] Route matched with {action = "Buy", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Contracts.BuyItemsResponse] BuyAsync(ApiGateway.Controllers.BuyItemsRequstModel) on controller ApiGateway.Controllers.ItemsController (ApiGateway).
2022-08-05 22:09:42.038 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-05 22:09:42.039 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-05 22:09:42.040 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-05 22:09:42.041 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-05 22:09:42.042 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-05 22:09:42.043 +04:00 [DBG] Executing controller factory for controller ApiGateway.Controllers.ItemsController (ApiGateway)
2022-08-05 22:09:42.044 +04:00 [DBG] Executed controller factory for controller ApiGateway.Controllers.ItemsController (ApiGateway)
2022-08-05 22:09:42.045 +04:00 [DBG] Attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' ...
2022-08-05 22:09:42.046 +04:00 [DBG] Attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' using the name '' in request data ...
2022-08-05 22:09:42.047 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-05 22:09:42.048 +04:00 [DBG] Connection id "0HMJN1KPER9TH", Request id "0HMJN1KPER9TH:00000002": started reading request body.
2022-08-05 22:09:42.049 +04:00 [DBG] Connection id "0HMJN1KPER9TH", Request id "0HMJN1KPER9TH:00000002": done reading request body.
2022-08-05 22:09:42.050 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApiGateway.Controllers.BuyItemsRequstModel'
2022-08-05 22:09:42.055 +04:00 [DBG] Done attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 22:09:42.055 +04:00 [DBG] Done attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 22:09:42.056 +04:00 [DBG] Attempting to validate the bound parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' ...
2022-08-05 22:09:42.058 +04:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 22:09:50.929 +04:00 [DBG] SEND "rabbitmq://localhost:0/Contracts:BuyItemsRequest" "da210000-5df3-0015-ad1e-08da770db0b0" Contracts.BuyItemsRequest
2022-08-05 22:09:57.170 +04:00 [DBG] RECEIVE "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybkadnbdp8qdj1ys?temporary=true" "0c5b0000-5df3-0015-60a0-08da770db466" MassTransit.Fault<Contracts.BuyItemsRequest> MassTransit.MessageHandler<Fault<Contracts.BuyItemsRequest>>("00:00:00.0033494")
2022-08-05 22:09:57.197 +04:00 [INF] Executed action ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway) in 15153.4534ms
2022-08-05 22:09:57.209 +04:00 [INF] Executed endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 22:09:57.210 +04:00 [ERR] An unhandled exception has occurred while executing the request.
MassTransit.RequestFaultException: The Contracts.BuyItemsRequest request faulted: BuyItemsSagaState(3fa85f64-5717-4562-b3fc-2c963f66afa6) Saga exception on receipt of Contracts.BuyItemsRequest: Not accepted in state Final
   at MassTransit.Clients.ResponseHandlerConnectHandle`1.GetTask()
   at MassTransit.RequestExtensions.Request[TRequest,TResponse](IBus bus, TRequest message, CancellationToken cancellationToken, RequestTimeout timeout, Action`1 callback)
   at ApiGateway.Controllers.ItemsController.BuyAsync(BuyItemsRequstModel model) in D:\github\microservices-archetecture\src\ApiGateway\Controllers\ItemsController.cs:line 23
   at lambda_method7(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-08-05 22:09:57.238 +04:00 [DBG] Connection id "0HMJN1KPER9TH" completed keep alive response.
2022-08-05 22:09:57.240 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5063/api/v1/items/buy application/json 86 - 500 - text/plain;+charset=utf-8 15209.9200ms
2022-08-05 22:10:02.854 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5063/api/v1/items/buy application/json 86
2022-08-05 22:10:02.855 +04:00 [DBG] 1 candidate(s) found for the request path '/api/v1/items/buy'
2022-08-05 22:10:02.856 +04:00 [DBG] Endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)' with route pattern 'api/v1/items/buy' is valid for the request path '/api/v1/items/buy'
2022-08-05 22:10:02.858 +04:00 [DBG] Request matched endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 22:10:02.859 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-08-05 22:10:02.860 +04:00 [INF] Executing endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 22:10:02.861 +04:00 [INF] Route matched with {action = "Buy", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Contracts.BuyItemsResponse] BuyAsync(ApiGateway.Controllers.BuyItemsRequstModel) on controller ApiGateway.Controllers.ItemsController (ApiGateway).
2022-08-05 22:10:02.862 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-05 22:10:02.863 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-05 22:10:02.865 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-05 22:10:02.866 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-05 22:10:02.868 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-05 22:10:02.869 +04:00 [DBG] Executing controller factory for controller ApiGateway.Controllers.ItemsController (ApiGateway)
2022-08-05 22:10:02.870 +04:00 [DBG] Executed controller factory for controller ApiGateway.Controllers.ItemsController (ApiGateway)
2022-08-05 22:10:02.871 +04:00 [DBG] Attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' ...
2022-08-05 22:10:02.874 +04:00 [DBG] Attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' using the name '' in request data ...
2022-08-05 22:10:02.876 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-05 22:10:02.877 +04:00 [DBG] Connection id "0HMJN1KPER9TH", Request id "0HMJN1KPER9TH:00000003": started reading request body.
2022-08-05 22:10:02.877 +04:00 [DBG] Connection id "0HMJN1KPER9TH", Request id "0HMJN1KPER9TH:00000003": done reading request body.
2022-08-05 22:10:02.878 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApiGateway.Controllers.BuyItemsRequstModel'
2022-08-05 22:10:02.879 +04:00 [DBG] Done attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 22:10:02.880 +04:00 [DBG] Done attempting to bind parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 22:10:02.881 +04:00 [DBG] Attempting to validate the bound parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel' ...
2022-08-05 22:10:02.882 +04:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'ApiGateway.Controllers.BuyItemsRequstModel'.
2022-08-05 22:10:04.213 +04:00 [DBG] SEND "rabbitmq://localhost:0/Contracts:BuyItemsRequest" "da210000-5df3-0015-5ef4-08da770db89c" Contracts.BuyItemsRequest
2022-08-05 22:10:17.621 +04:00 [DBG] RECEIVE "rabbitmq://localhost:0/SMS2104090_ApiGateway_bus_5eooyyn76cybkadnbdp8qdj1ys?temporary=true" "0c5b0000-5df3-0015-a8ce-08da770dc09d" Contracts.BuyItemsResponse MassTransit.MessageHandler<Contracts.BuyItemsResponse>("00:00:00.0002435")
2022-08-05 22:10:19.929 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-05 22:10:19.936 +04:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-08-05 22:10:19.938 +04:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-08-05 22:10:19.939 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-05 22:10:19.939 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-05 22:10:19.940 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-05 22:10:19.941 +04:00 [INF] Executing ObjectResult, writing value of type 'Contracts.BuyItemsResponse'.
2022-08-05 22:10:19.942 +04:00 [INF] Executed action ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway) in 17073.1254ms
2022-08-05 22:10:19.943 +04:00 [INF] Executed endpoint 'ApiGateway.Controllers.ItemsController.BuyAsync (ApiGateway)'
2022-08-05 22:10:19.944 +04:00 [DBG] Connection id "0HMJN1KPER9TH" completed keep alive response.
2022-08-05 22:10:19.945 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5063/api/v1/items/buy application/json 86 - 200 - application/json;+charset=utf-8 17091.0885ms
